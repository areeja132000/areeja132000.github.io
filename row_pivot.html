<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width,initial-scale=1"
  <title></title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Red+Hat+Mono&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="stylesheet.css">
  <script src="https://kit.fontawesome.com/3273cb5b36.js" crossorigin="anonymous"></script>
</head>
<body onload="setBar()">
  <section class="calculator">
    <nav>
      <div class="nav-links" id="navLinks">
        <i class="fa-solid fa-xmark" onclick="hideMenu()"></i>
          <ul>
            <li><a href="index.html">HOME</a></li>
            <li><a href="contact.html">CONTACT</a></li>
            <li><a href="row_pivot.html">GAUSSIAN ELIMINATION ROW PIVOTING</a></li>
          </ul>
      </div>
      <i class="fa-solid fa-bars" onclick="showMenu()"></i>
    </nav>
  </section>
  <section class="instructions">
    <h1>Perform Gaussian Elimination with row pivoting</h1>
    <p>Please enter the numbers corresponding to your system of equations</p>
  </section>
  <section class="calculator">
     <table id="calc">
      <thead>
        <tr>
          <th><input type="number" id="n_00" /></th>
          <th><input type="number" id="n_01" /></th>
          <th><input type="number" id="n_02" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><input type="number" id="n_10" /></td>
          <td><input type="number" id="n_11" /></td>
          <td><input type="number" id="n_12" /></td>
        </tr>
        <tr>
          <td><input type="number" id="n_20" /></td>
          <td><input type="number" id="n_21" /></td>
          <td><input type="number" id="n_22" /></td>
        </tr>
      </tbody>
    </table>
  </section>
  <section class="submission">
    <button class="button" onclick="submit()">
      <p>Calculate</p>
    </button>
  </section>
  <section class="results" id="results">

  </section>
<script>
  function setBar(){
    var navLinks = document.getElementById("navLinks");
    navLinks.style.right = "-200px";
  }
  
  function showMenu(){
    var navLinks = document.getElementById("navLinks");
    navLinks.style.right = "0px";
  }
  
  function hideMenu(){
    var navLinks = document.getElementById("navLinks");
    navLinks.style.right = "-200px";
  }
 
  function create_table(matrix){
    const div = document.getElementById('results');
    var tbl = document.createElement('table');
    for (let i = 0; i < 3; i++) {
      const tr = tbl.insertRow();
      for (let j = 0; j < 3; j++) {
        const td = tr.insertCell();
        td.appendChild(document.createTextNode(matrix[i][j]));
      }
    }
    div.appendChild(tbl); 
  }
  
  function find_biggest_row_create_tables(column, n, matrix){
  
    var biggest=matrix[column][column];
    var biggest_row = column;
    for (var row=column+1;row<n; row++){
      if (matrix[row][column] > biggest){
        biggest=matrix[row][column];
        biggest_row=row;
      }
    }
    
    var temp = [];
    temp = matrix[column];
    matrix[column] = matrix[biggest_row];
    matrix[biggest_row] = temp;
    
    /*create table*/
    create_table(matrix);
    
    /*row reduction*/
    for (var row=column+1;row<n; row++){
      var multiplier=(-1*matrix[row][column])/matrix[column][column];
      console.log("column: "+ column + " multiplier: " + multiplier);
      for (var current_col=column;current_col<n; current_col++){
        console.log((multiplier)*matrix[column][current_col]+matrix[row][current_col]);
        matrix[row][current_col]= (multiplier)*matrix[column][current_col]+matrix[row][current_col];
      }
    }
    
    /*create table*/
    create_table(matrix);
    
  }
  
  function submit(){
    /*can change n if decide to expand*/
    n=3;
    
    var matrix = [];
    for(var x=0; x<n; x++) { /*row*/
      var row = [];
      for(var a=0; a<n; a++) { /*column*/
        string = "n_" + x + a;
        console.log(string);
        row[a] = parseFloat(document.getElementById(string).value);
      }
      matrix[x] = row;
    }
    
    for (var x=0;x<n-1;x++){
      find_biggest_row_create_tables(x, n, matrix)
    }
    
    document.getElementById("results").style.display = "block";
  }
  

</script>
</body>
</html>